package hw0q2;
import java.io.*;

/**
 * @author yoavg
 *
 */
public class CommentsParser {
	
	/**
	 * @requires args[0] = file name
	 * @effects if no IOException occurred, prints comments in file name
	 */
	public static void main(String[] args) throws IOException {
		String line_comments_re = ".*//.*";
		String blk_comments_re_open = ".*/\\*.*";
		String blk_comments_re_close = ".*\\*/.*";
		
		if (args.length != 1) {
			System.err.println(String.format(
					"CommentsParser class must recieve exactly 1 argument. " +
					"You passed %d arguments", args.length));
			return;
		}
		
		for (String arg: args) {
			System.out.println(arg);
		}
		
		try {
			BufferedReader file = new BufferedReader(new FileReader(args[0]));
			String line;
			boolean in_comments_blk = false;
			while ((line = file.readLine()) != null) {
				
				if (line.matches(line_comments_re)) {
					System.out.println(line.replaceFirst(".*?//", ""))
				}
				
				if (line.matches(blk_comments_re_close) && in_comments_blk) {
					in_comments_blk = false;

				}
				
				if (line.matches(blk_comments_re_open)) {
					in_comments_blk = true;
		
				}
				
				if (line.matches(line_comments_re)) {

				}
				
				if (in_comments_blk) {
					System.out.println(line);
				}
			}
			file.close();
		}
		catch (IOException e) {
			System.err.println(String.format("Unable to open file \"%s\"", args[0]));
		}
	}
}
